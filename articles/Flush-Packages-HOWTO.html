<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>How to flush the Software repository • ReleaseLaunch</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="How to flush the Software repository">
<meta property="og:description" content="ReleaseLaunch">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ReleaseLaunch</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.99.10</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/ReleaseChecklist.html">The Release Checklist</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    How-Tos
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Branch-annotation-repo-HOWTO.html">Branch annotation package repository</a>
    </li>
    <li>
      <a href="../articles/Flush-Packages-HOWTO.html">Flush packages</a>
    </li>
    <li>
      <a href="../articles/Version-bump-and-branch-creation-HOWTO.html">Version bump and branch</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Bioconductor/ReleaseLaunch">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>How to flush the Software repository</h1>
                        <h4 data-toc-skip class="author">Bioconductor
Maintainer</h4>
            
            <h4 data-toc-skip class="date">April 25, 2023</h4>
      
      
      <div class="hidden name"><code>Flush-Packages-HOWTO.Rmd</code></div>

    </div>

    
    
<style type="text/css">
.infobox {
  padding: 1em 1em 1em 1em;
  margin-bottom: 10px;
  border: 2px solid #008000;
  border-radius: 10px;
  background: #c7dbe4 5px center/3em no-repeat;
  color: #8B0000;
}

.center {
  text-align: center;
}
</style>
<div class="section level2">
<h2 id="flushing-the-software-repository">Flushing the Software Repository<a class="anchor" aria-label="anchor" href="#flushing-the-software-repository"></a>
</h2>
<p>To remove stale software packages, we flush the software repository.
This might be necessary when a build machine has transition from devel
to release to try to remove odd version-numbered packages.</p>
<p>It’s important to reserve enough time and carefully check the results
of the report so that it doesn’t negatively impact users.</p>
<p>The following are instructions to flush the software repository for
the 3.14 builds as an example.</p>
<div class="section level3">
<h3 id="check-the-days-report">Check the Day’s Report<a class="anchor" aria-label="anchor" href="#check-the-days-report"></a>
</h3>
<p>Verify that the software report for the day looks good and that you
have at least an hour before the next build. Look for packages, such as
<code>GenomicFeatures</code>, that are dependencies for many packages
and ensure that they are not failing. If they are failing, you should
wait until they are passing before attempting to flush the software
repository.</p>
</div>
</div>
<div class="section level2">
<h2 id="comment-out-software-propagation-in-the-crontab">Comment Out Software Propagation in the Crontab<a class="anchor" aria-label="anchor" href="#comment-out-software-propagation-in-the-crontab"></a>
</h2>
<p>As <code>biocpush</code>, comment out the crontab entry for bioc.
This will prevent master from resyncing with staging on the build
machine you’re working on.</p>
<div class="section level3">
<h3 id="make-a-backup">Make a Backup<a class="anchor" aria-label="anchor" href="#make-a-backup"></a>
</h3>
<p>Create a backup of the software packages in case a package that is a
dependency for several packages, such as <code>GenomicFeatures</code>,
that was passing later fails in the new build report after removing all
packages.</p>
<div class="infobox">
<p>As <code>biocpush</code></p>
</div>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ~biocpush/PACKAGES/3.14/</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> <span class="at">-r</span> bioc bioc.backup</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="remove-all-packages">Remove All Packages<a class="anchor" aria-label="anchor" href="#remove-all-packages"></a>
</h3>
<p>Remove all packages from <code>~biocpush/PACKAGES/3.14/bioc</code>
for source, windows, and mac binaries. Everything except for the
<code>Archives</code> directories should be gone and the
<code>PACKAGES</code> files should be replaced with blank files.</p>
<div class="infobox">
<p>As <code>biocpush</code></p>
</div>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ~biocpush/PACKAGES/3.14/src/contrib</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> <span class="at">-r</span> PACKAGES<span class="pp">*</span> <span class="pp">*</span>.gz</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">touch</span> PACKAGES</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ~biocpush/PACKAGES/3.14/macosx/contrib/4.1</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> <span class="at">-r</span> PACKAGES<span class="pp">*</span> <span class="pp">*</span>.tgz</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">touch</span> PACKAGES</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ~biocpush/PACKAGES/3.14/windows/contrib/4.1</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> <span class="at">-r</span> PACKAGES<span class="pp">*</span> <span class="pp">*</span>.zip</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">touch</span> PACKAGES</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="rerun-the-postrun-sh">Rerun the <code>postrun.sh</code><a class="anchor" aria-label="anchor" href="#rerun-the-postrun-sh"></a>
</h3>
<p>As <code>biocbuild</code> rerun <code>postrun.sh</code> so that we
get a new report. Check that the new report has green leds and that
important packages, such as <code>GenomicFeatures</code>, pass so that
we don’t have a lot of failures.</p>
<p>If the report is not good, replace <code>bioc</code> with
<code>bioc.backup</code> and rerun the <code>postrun.sh</code>.</p>
</div>
<div class="section level3">
<h3 id="manually-run-updaterepospkgs-bioc-sh">Manually Run <code>updateReposPkgs-bioc.sh</code><a class="anchor" aria-label="anchor" href="#manually-run-updaterepospkgs-bioc-sh"></a>
</h3>
<p>If the report is good, manually run
<code>updateReposPkgs-bioc.sh</code> as <code>biocpush</code>.</p>
</div>
<div class="section level3">
<h3 id="uncomment-software-propagation-in-the-crontab">Uncomment Software Propagation in the Crontab<a class="anchor" aria-label="anchor" href="#uncomment-software-propagation-in-the-crontab"></a>
</h3>
<p>When everything is finished, uncomment the bioc propagation line in
the crontab.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Marcel Ramos.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
