<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Release Checklist • ReleaseLaunch</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="The Release Checklist">
<meta property="og:description" content="ReleaseLaunch">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ReleaseLaunch</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.99.21</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/ReleaseChecklist.html">The Release Checklist</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    How-Tos
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Branch-annotation-repo-HOWTO.html">Branch annotation package repository</a>
    </li>
    <li>
      <a href="../articles/Flush-Packages-HOWTO.html">Flush packages</a>
    </li>
    <li>
      <a href="../articles/Version-bump-and-branch-creation-HOWTO.html">Version bump and branch</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Bioconductor/ReleaseLaunch">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>The Release Checklist</h1>
                        <h4 data-toc-skip class="author">Bioconductor
Maintainer</h4>
            
            <h4 data-toc-skip class="date">May 14, 2024</h4>
      
      
      <div class="hidden name"><code>ReleaseChecklist.Rmd</code></div>

    </div>

    
    
<style type="text/css">
.infobox {
  padding: 1em 1em 1em 1em;
  margin-bottom: 10px;
  border: 2px solid #008000;
  border-radius: 10px;
  background: #c7dbe4 5px center/3em no-repeat;
  color: #8B0000;
}

.center {
  text-align: center;
}
</style>
<div class="section level2">
<h2 id="pre-release">Pre-release<a class="anchor" aria-label="anchor" href="#pre-release"></a>
</h2>
<div class="section level3">
<h3 id="r-versions">R versions<a class="anchor" aria-label="anchor" href="#r-versions"></a>
</h3>
<p>Prior to the release we should be testing the latest binary packages
with the upcoming release with R RC or R PRERELEASE on a clean Windows
and Mac machine. It’s important to use these binary R installations:</p>
<p>R Windows binary:</p>
<p><a href="http://cran.r-project.org/bin/windows/base/" class="external-link uri">http://cran.r-project.org/bin/windows/base/</a></p>
<p>R Mac binary:</p>
<p><a href="http://cran.r-project.org/bin/macosx/" class="external-link uri">http://cran.r-project.org/bin/macosx/</a></p>
<p>A “clean” machine means, on Windows, no Rtools, LaTeX, etc. On Mac it
means no Xcode and do not use Simon U’s builds, use the one above.</p>
<p>We should test with both the GUI and command-line versions of R. One
specific thing to test is that the impute, DNAcopy, and NuPoP packages
can be loaded on a Mac in the R GUI. If they can’t, the links in the .so
files are not being fixed properly.</p>
<p>During this process, we want to watch every day for new R versions
(RC, prerelease,etc) and install them on our devel build systems.</p>
<p>Some important operations that need to happen before a BioC release,
in <em>this</em> order</p>
</div>
<div class="section level3">
<h3 id="six-weeks-before">Six weeks before<a class="anchor" aria-label="anchor" href="#six-weeks-before"></a>
</h3>
<ul>
<li><p>Start building annotations (update R on the annotation EC2
instance)</p></li>
<li><p>Update AnnotationForge and GenomeInfoDbData data files in
preparation for nonstandard orgdb generation</p></li>
<li><p>db0 packages posted to the devel repo</p></li>
<li><p>Draft release schedule.</p></li>
<li><p>Divide package ranges</p></li>
<li><p>Start contacting maintainers about errors including bad NEWS
files</p></li>
<li><p>Create slack channel on dev-team slack</p></li>
<li><p>Announce new package submission deadline</p></li>
<li><p>Announce release schedule</p></li>
<li><p>OrgDb and TxDb packages posted to the devel repo</p></li>
<li><p>After OrgDb and TxDb are in devel repo, add to
annotationhub</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="four-weeks-before">Four weeks before<a class="anchor" aria-label="anchor" href="#four-weeks-before"></a>
</h3>
<ul>
<li><p>Announce deprecated / defunct packages</p></li>
<li><p>Announce contributed annotation deadline</p></li>
<li><p>Update GenmeInfoDb mapping table between UCSC and
ensembl</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="three-weeks-before">Three weeks before<a class="anchor" aria-label="anchor" href="#three-weeks-before"></a>
</h3>
<ul>
<li><p>The day before we stop the release builds, update
remove-packages.md in the current release, e.g., 3.5.</p></li>
<li><p>Deadline for new package submissions</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="two-weeks-before">Two weeks before<a class="anchor" aria-label="anchor" href="#two-weeks-before"></a>
</h3>
<ul>
<li><p>Disable commits to old release branch. see
scripts/sedCommandsForVariousTasks.txt</p></li>
<li><p>After the last build report for old relase is online, stop the
old release builds.</p></li>
</ul>
<div class="infobox">
<p><strong>HISTORICAL NOTE</strong></p>
<p>After stopping release builds, on all Mac build machines, point the
“Current” symlink in /Library/Frameworks/R.framework/Versions to the new
DEVEL version of R. Otherwise we will be producing broken binaries! (Not
applicable if only one build is running on each Mac machine, as should
be the case from BioC 2.9 onward; but we do want to make sure that there
is only ever one version of R installed on these Mac build
machines.)</p>
</div>
<ul>
<li><p>Update <a href="https://bioconductor.org/checkResults/" class="external-link uri">https://bioconductor.org/checkResults/</a> by moving the old
release to the top of the “Archived results for past release”
section.</p></li>
<li><p>Feature freeze for the to-be-release version. No API changes, no
new packages added to the roster.</p></li>
<li><p>All contributed annotation packages added to the to-be-release
repo.</p></li>
<li><p>Install latest biocViews on biocpush account on to-be-release
master builder.</p></li>
<li><p>Create the manifest files for new devel and remove the deprecated
packages BEFORE the first build.</p></li>
<li><p>Remove packages from package.conf that have been defunct and
removed from last release</p></li>
<li>
<p>Start setting up new devel builders and repositories.</p>
<p>Make sure that the R that runs as biocpush is current, has the most
current biocViews and that ‘knitcitations’ is installed.</p>
<p>Note about Simlinks to old devel:</p>
<p>Until the next devel builds are running, we want symlinks pointing to
the old devel builds so that the BiocManager package will work. This
includes the software, data/annotation, and data/experiment
repositories. Remove these symlinks when the builds start
running.</p>
</li>
<li><p>Add links to checkResults page for new devel builds</p></li>
<li><p>Confirm build report for new devel builds is intact</p></li>
<li><p>Think about chaning BiocManager and the
/developers/howto/useDevel web page. Modify any R/BioC versions if
necessary.</p></li>
<li><p>Update AMI and docker for the release being frozen, e.g., 3.5. Do
this before we branch so r-release is still pointing at 3.5 instead of
3.6.</p></li>
<li><p>Update NEWS files</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="one-week-before">One week before<a class="anchor" aria-label="anchor" href="#one-week-before"></a>
</h3>
<ul>
<li>Packages and workflows clean of errors and warnings</li>
</ul>
</div>
<div class="section level3">
<h3 id="day-before-we-branch-d-2">Day before we branch (D-2):<a class="anchor" aria-label="anchor" href="#day-before-we-branch-d-2"></a>
</h3>
<ul>
<li>
<p>Manifest file for the release branch</p>
<p>Create the manifest file for the release branch, e.g., “RELEASE_3_6”.
Up to this point and until we branch tomorrow, both 3.6 and the new
devel should be using the “master” manifest.</p>
</li>
</ul>
<div class="infobox">
<p><strong>Notes</strong></p>
<ul>
<li><p>Branch creation must be done after all packages for 3.6 have been
added to the manifest.</p></li>
<li><p>As part of the bump and branch process tomorrow, the
<code>BBS_BIOC_MANIFEST_GIT_BRANCH</code> variable on the release
builder will be modified to point to the correct manifest. This variable
is defined in the <code>config.sh</code> and <code>config.bat</code>
files located in the <code>~biocbuild/BBS/3.6/bioc/</code> and
<code>~biocbuild/BBS/3.6/data-experiment/</code> folders. For now,
packages must still be built off their master branch so do
<strong>NOT</strong> touch the <code>BBS_BIOC_GIT_BRANCH</code>
variable!</p></li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="day-we-branch-d-1">Day we branch (D-1):<a class="anchor" aria-label="anchor" href="#day-we-branch-d-1"></a>
</h3>
<ul>
<li><p>Send mail to bioc-devel to ask people to stop commits until
further notice so we can create the 3.6 branches (software and data
experiment). The bump and branch took about 2 hours.</p></li>
<li><p>Bump versions and create BioC 3.6 release branch <a href="https://github.com/Bioconductor/ReleaseLaunch/blob/devel/vignettes/Version-bump-and-branch-creation-HOWTO.Rmd" class="uri">https://github.com/Bioconductor/ReleaseLaunch/blob/devel/vignettes/Version-bump-and-branch-creation-HOWTO.Rmd</a></p></li>
<li><p>Confirm MEAT0 is pointed at the correct manifest for the 3.6 and
3.7 builds.</p></li>
<li><p>Update gitolite authorization files to give maintainers R/W
access to their package in the new branch. see
scripts/sedCommandsForVariousTasks.txt</p></li>
<li><p>Confirm new branch can be checkout from a location other than the
machine used to create the branch (i.e., your local system).</p></li>
<li><p>Announce the creation of the 3.6 branch and that commits can
resume. Clarify the difference between the new branch and
master.</p></li>
<li><p>Confirm defunct packages have been removed from the 3.7
manifest.</p></li>
<li><p>BiocManager: Update R version dependency in devel version of
BiocVersion.</p></li>
<li><p>Run the builds …</p></li>
<li><p>Run a script to generate recent NEWS for all packages, to be
included in the release announcement. (biocViews:::getPackageNEWS.R()).
Verify that there are no <na>s in output. Collate package descriptions
with biocViews:::getPackageDescriptions().</na></p></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="release-day">Release day<a class="anchor" aria-label="anchor" href="#release-day"></a>
</h2>
<ul>
<li>
<p>bioconductor.org/config.yaml</p>
<p>Update config.yaml in the root of the bioconductor.org working copy
and change values as indicated in the comments. This will (among other
things), automatically update the website symlinks (“release” and
“devel”) under /packages.</p>
</li>
</ul>
<div class="infobox">
<p><strong>NOTE</strong></p>
<p>If there is no annotation branch, that line under ‘devel_repos’ must
be commented out; if any of annotation, experiment data or software are
not available (and a simlink makes them unavailable) the script will
break and landing pages will not be generated. If using symlinks, mark
as unavailable or else will destroy symlinked directory!</p>
</div>
<p>After a release you should let the no-longer-release version build
one last time so package landing pages won’t say “release version”.</p>
<ul>
<li>
<p>rsync on master</p>
<p>UPDATE the /etc/rsyncd.conf on master.bioconductor.org and restart
rsync.</p>
</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>    <span class="fu">sudo</span> systemctl restart rsync</span></code></pre></div>
<p>Test rsync is still working as expected with commands from: <a href="http://www.bioconductor.org/about/mirrors/mirror-how-to/" class="external-link uri">http://www.bioconductor.org/about/mirrors/mirror-how-to/</a>.</p>
<ul>
<li>
<p>mirrors/enable archiving for bioc in apache config</p>
<p>The mirror instructions on the website will be updated automatically
when config.yaml is updated.</p>
<p>The apache config files need to updated by hand. Add a new
(copy-paste) section at the top for the new release number in these 2
files:</p>
</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>    <span class="ex">/etc/apache2/sites-available/000-default.conf</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>    <span class="ex">/etc/apache2/sites-available/default-ssl.conf</span></span></code></pre></div>
<div class="infobox">
<p><strong>Note</strong></p>
<p>It couldn’t hurt to restart the Apache server:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>    <span class="fu">sudo</span> service apache2 restart</span></code></pre></div>
</div>
<p>Test the mirrors with commands from: <a href="http://www.bioconductor.org/about/mirrors/mirror-how-to/" class="external-link uri">http://www.bioconductor.org/about/mirrors/mirror-how-to/</a>.
In a test directory the following should produce correct results</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>    <span class="fu">rsync</span> <span class="at">-zrtlv</span> <span class="at">--delete</span> master.bioconductor.org::devel/bioc . </span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>    <span class="fu">rsync</span> <span class="at">-zrtlv</span> <span class="at">--delete</span> master.bioconductor.org::release/bioc . </span></code></pre></div>
<ul>
<li><p>Update checkResults page and symlinks (“release” and “devel”)
under checkResults/.</p></li>
<li>
<p>Website updates: – Update build report index page and symlinks;
remove “devel” background image from report.css (if there is one).</p>
<p>– Put release announcement on web and add to pages which contain
links to all release announcements (/about/release-announcements and
**/layouts/_release_announcements.html**). Put today’s date at the top
of the web version of the release announcement.</p>
<p>– Add the last release version to the list of ‘Previous Versions’
(layouts/_bioc_older_packages.html). <strong>DON’T FORGET
THIS!</strong></p>
<p>– Update link to release announcement on main index page</p>
<p>– Update number of packages on main index page</p>
<p>– Add “Disallow: /packages/XX/” to the web site’s robots.txt file
where XX is the new devel version (one higher than the version) that was
just released. (on master)</p>
<p>– Update <a href="http://bioconductor.org/install/" class="external-link uri">http://bioconductor.org/install/</a> for
BiocManager</p>
</li>
<li><p>Webstats updates</p></li>
<li>
<p><code><a href="https://bioconductor.github.io/BiocManager/reference/install.html" class="external-link">BiocManager::install()</a></code> sanity check</p>
<p>Was BiocManager installed / updated properly? With a fresh R devel
and release</p>
</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>    <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"BiocManager"</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>
<p>Finalize release announcement</p>
<p>– compare number of packages in announcement with manifest
file</p>
</li>
<li><p>Once the build report posts and products are pushed to master
confirm landing pages have updated versions</p></li>
<li><p>Announce the release</p></li>
<li><p>Tweet a link to the release announcement</p></li>
<li><p>Update Wikipedia page for Bioconductor</p></li>
<li><p>Go for a beer.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="post-release">Post-release<a class="anchor" aria-label="anchor" href="#post-release"></a>
</h2>
<div class="section level3">
<h3 id="week-after-the-release-d">Week after the Release (D+):<a class="anchor" aria-label="anchor" href="#week-after-the-release-d"></a>
</h3>
<ul>
<li>Confirm Archive/ folder is working for new release. The relevant
script is BBS/utils/list.old.packages.R which depends on BiocManager to
determine if archiving should happen. Example location to look:</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>    <span class="ex">biocpush@nebbiolo1:~$</span> ls PACKAGES/3.15/bioc/src/contrib/Archive/</span></code></pre></div>
<ul>
<li><p>A few days after release, flush the new release package repo.
This will remove odd numbered y of x.y.z version left over from being
devel and highlight packages that are erroring in release.</p></li>
<li><p>Build dockers for new release and devel</p></li>
<li><p>Update SPB and clean sqlite file</p></li>
<li><p>ID packages for deprecation</p></li>
<li><p>Update static data in Bioconductor packages GenomeInfoDB and
UniProt.ws Update
GenomeInfoDB/inst/extdata/dataFiles/genomeMappingTbl.csv mapping table
for any new ensembl or UCSC entries. <a href="https://genome.ucsc.edu/FAQ/FAQreleases.html" class="external-link uri">https://genome.ucsc.edu/FAQ/FAQreleases.html</a> <a href="http://useast.ensembl.org/info/website/archives/assembly.html" class="external-link uri">http://useast.ensembl.org/info/website/archives/assembly.html</a>
Update UniProt.ws/inst/extdata/ keytypes.txt and speclist.txt Will need
to checkout github branch remove_static_files branch for code to
generate these files (in R/ code).</p></li>
<li><p>reach out to packages with malformated NEWS files for
correction</p></li>
<li>
<p>Update Bioconductor GitHub repositories</p>
<p>Push packages with “core-package tag from git.bioconductor.org to
github. Check if any packages have commits to just github (not sure how
to fix?). If all looks ok, sync from git.bioconductor.org to
github.</p>
</li>
<li><p>Move legacy release build products off master and into AWS/OSN.
Only active release and devel on master</p></li>
<li><p>update books/release/index.md</p></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Marcel Ramos, Lori Shepherd, Hervé Pagès.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
